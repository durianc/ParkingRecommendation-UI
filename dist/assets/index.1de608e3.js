import{r as e,c as a,a as l,b as n,w as t,o as s,d as o,p as r,e as i,f as c,g as d,h as u,i as p,v,j as f,k as m,l as g,t as b,m as h,n as _,q as k,F as y,s as P,T as x,u as w,x as M,y as I}from"./vendor.c6335476.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?a.credentials="include":"anonymous"===e.crossorigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const A={id:"app"},C=o("首页"),D=o("用户偏好设置"),N=o("获取推荐结果"),U=o("驾车路径规划"),L={setup:o=>(o,r)=>{const i=e("router-link"),c=e("router-view");return s(),a("div",A,[l("nav",null,[n(i,{to:"/"},{default:t((()=>[C])),_:1}),n(i,{to:"/user-preferences"},{default:t((()=>[D])),_:1}),n(i,{to:"/parking-recommendations"},{default:t((()=>[N])),_:1}),n(i,{to:"/driving-route-planner"},{default:t((()=>[U])),_:1})]),n(c)])}};const S={name:"HomePage"};r("data-v-73fa6578");const T={class:"home-page"},F=[c('<header class="header" data-v-73fa6578><h1 data-v-73fa6578>基于神经协同过滤的停车位推荐方法</h1><p data-v-73fa6578>智能化、个性化的停车位推荐系统</p></header><section class="content-section" data-v-73fa6578><div class="content-card" data-v-73fa6578><h2 data-v-73fa6578>方法概述</h2><p data-v-73fa6578> 本方法通过结合神经网络和协同过滤技术，针对停车位推荐问题提出了一种智能化、个性化的解决方案。利用用户偏好信息、位置信息，采用改进后的神经图匹配协同过滤（GMCF）算法，并结合Neo4j图数据库、qdrant向量数据库以及高德API，实现精准的推荐结果和前端可视化展示。 </p></div><div class="content-card" data-v-73fa6578><h2 data-v-73fa6578>方法优势</h2><ul data-v-73fa6578><li data-v-73fa6578>个性化推荐：基于改进的神经图匹配协同过滤方法，分析用户偏好，生成高度个性化的推荐结果。</li><li data-v-73fa6578>实时动态更新：采用Neo4j图数据库和qdrant技术，优化数据存储与检索效率。</li><li data-v-73fa6578>前端可视化：利用高德API进行推荐车位的可视化展示和驾车路径规划，用户可以直观地查看推荐停车位的位置及前往路线。</li></ul></div><div class="content-card" data-v-73fa6578><h2 data-v-73fa6578>应用场景</h2><ul data-v-73fa6578><li data-v-73fa6578>大城市或拥挤区域的停车位推荐。</li><li data-v-73fa6578>结合导航系统的智能停车推荐。</li><li data-v-73fa6578>为停车场提供智能化管理决策支持。</li></ul></div></section><section class="members-section" data-v-73fa6578><h2 data-v-73fa6578>项目成员</h2><div class="members-list" data-v-73fa6578><div class="member-card leader-card" data-v-73fa6578><strong data-v-73fa6578>陈威宇</strong></div><div class="member-card" data-v-73fa6578>张铭心</div><div class="member-card" data-v-73fa6578>肖晗涵</div><div class="member-card" data-v-73fa6578>洪巧君</div><div class="member-card" data-v-73fa6578>梅明胜</div></div></section><section class="teacher-section" data-v-73fa6578><h2 data-v-73fa6578>指导老师</h2><div class="members-list" data-v-73fa6578><div class="member-card teacher-card" data-v-73fa6578><strong data-v-73fa6578>廖龙龙</strong></div></div></section>',4)];i(),S.render=function(e,l,n,t,o,r){return s(),a("div",T,F)},S.__scopeId="data-v-73fa6578";const V={setup(){const e=d(""),a=d(!1),l=d(""),n=d(""),t=d({preferred_parking_types:[],max_parking_fee:null,preferred_parking_difficulty:null,max_walking_distance:null,max_driving_distance:null}),s=u((()=>{const{preferred_parking_types:e,max_parking_fee:a,preferred_parking_difficulty:l,max_walking_distance:n,max_driving_distance:s}=t.value;return e.length>0&&null!==a&&null!==l&&null!==n&&null!==s}));return{userIdString:e,preferences:t,userExists:a,successMessage:l,errorMessage:n,isFormComplete:s,fetchUserPreferences:async()=>{const s=parseInt(e.value);if(isNaN(s))n.value="请输入有效的用户ID";else{n.value="",l.value="",a.value=!1;try{const e=await h.get(`/user/${s}`);t.value=e.data,a.value=!0}catch(o){n.value=o.response?o.response.data.detail:"无法获取用户信息"}}},submitPreferences:async()=>{n.value="",l.value="";const a=parseInt(e.value);try{const e=await h.put(`/user/${a}`,t.value);l.value=e.data.msg}catch(s){n.value=s.response?s.response.data.detail:"提交偏好信息失败"}},goToNextPage:()=>{if(s.value){const a=parseInt(e.value);window.location.href=`/parking-recommendations?userId=${a}`}}}}},j={class:"container mt-5"},z={class:"row justify-content-center"},G={class:"col-md-8 col-lg-8 col-xl-6"},R={class:"card shadow-sm p-4"},q=l("h1",{class:"text-center mb-4"},"用户偏好信息",-1),B={class:"mb-4 d-flex align-items-center"},E=l("label",{for:"userId",class:"form-label me-2"},"ID:",-1),H={class:"input-group"},O={class:"row mb-3"},$={class:"col-md-6"},K=l("label",{for:"preferredParkingTypes",class:"form-label"},"停车场类型偏好:",-1),W=[l("option",{value:"商场"},"商场",-1),l("option",{value:"地面停车场"},"地面停车场",-1),l("option",{value:"地下停车场"},"地下停车场",-1),l("option",{value:"交通枢纽"},"交通枢纽",-1)],Y={class:"col-md-6"},J=l("label",{for:"maxParkingFee",class:"form-label"},"最大停车费用 (CNY/hour):",-1),Q=[c('<option disabled value="">请选择费用</option><option value="10">10</option><option value="20">20</option><option value="30">30</option><option value="40">40</option>',5)],X={class:"row mb-3"},Z={class:"col-md-6"},ee=l("label",{for:"preferredParkingDifficulty",class:"form-label"},"停车难度偏好:",-1),ae=[l("option",{value:"容易"},"容易",-1),l("option",{value:"中等"},"中等",-1),l("option",{value:"困难"},"困难",-1)],le={class:"col-md-6"},ne=l("label",{for:"maxWalkingDistance",class:"form-label"},"最大步行距离 (米):",-1),te=[c('<option disabled value="">请选择距离</option><option value="100">100</option><option value="200">200</option><option value="300">300</option><option value="400">400</option>',5)],se={class:"row mb-3"},oe={class:"col-md-12"},re=l("label",{for:"maxDrivingDistance",class:"form-label"},"最大驾车距离 (米):",-1),ie=[c('<option disabled value="">请选择距离</option><option value="500">500</option><option value="1000">1000</option><option value="1500">1500</option><option value="2000">2000</option>',5)],ce=l("button",{type:"submit",class:"btn btn-success"},"提交偏好信息",-1),de=["disabled"],ue={key:1,class:"alert alert-danger mt-3"},pe={key:2,class:"alert alert-success mt-3"};V.render=function(e,n,t,o,r,i){return s(),a("div",j,[l("div",z,[l("div",G,[l("div",R,[q,l("div",B,[E,l("div",H,[p(l("input",{type:"text",id:"userId",class:"form-control","onUpdate:modelValue":n[0]||(n[0]=e=>o.userIdString=e),placeholder:"请输入用户ID"},null,512),[[v,o.userIdString]]),l("button",{onClick:n[1]||(n[1]=(...e)=>o.fetchUserPreferences&&o.fetchUserPreferences(...e)),class:"btn btn-primary ms-2"},"获取用户信息")])]),o.userExists?(s(),a("form",{key:0,onSubmit:n[8]||(n[8]=f(((...e)=>o.submitPreferences&&o.submitPreferences(...e)),["prevent"]))},[l("div",O,[l("div",$,[K,p(l("select",{id:"preferredParkingTypes",class:"form-select","onUpdate:modelValue":n[2]||(n[2]=e=>o.preferences.preferred_parking_types=e)},W,512),[[m,o.preferences.preferred_parking_types]])]),l("div",Y,[J,p(l("select",{id:"maxParkingFee",class:"form-select","onUpdate:modelValue":n[3]||(n[3]=e=>o.preferences.max_parking_fee=e)},Q,512),[[m,o.preferences.max_parking_fee]])])]),l("div",X,[l("div",Z,[ee,p(l("select",{id:"preferredParkingDifficulty",class:"form-select","onUpdate:modelValue":n[4]||(n[4]=e=>o.preferences.preferred_parking_difficulty=e)},ae,512),[[m,o.preferences.preferred_parking_difficulty]])]),l("div",le,[ne,p(l("select",{id:"maxWalkingDistance",class:"form-select","onUpdate:modelValue":n[5]||(n[5]=e=>o.preferences.max_walking_distance=e)},te,512),[[m,o.preferences.max_walking_distance]])])]),l("div",se,[l("div",oe,[re,p(l("select",{id:"maxDrivingDistance",class:"form-select","onUpdate:modelValue":n[6]||(n[6]=e=>o.preferences.max_driving_distance=e)},ie,512),[[m,o.preferences.max_driving_distance]])])]),ce,l("button",{onClick:n[7]||(n[7]=(...e)=>o.goToNextPage&&o.goToNextPage(...e)),disabled:!o.isFormComplete,class:"btn btn-primary ms-2"},"下一步",8,de)],32)):g("",!0),o.errorMessage?(s(),a("div",ue,b(o.errorMessage),1)):g("",!0),o.successMessage?(s(),a("div",pe,b(o.successMessage),1)):g("",!0)])])])])};r("data-v-327310bf");const ve={id:"container"},fe=l("div",{id:"map"},null,-1),me={id:"panel"},ge=l("h3",null,"驾车路线",-1),be={id:"routeInfo"},he={key:0},_e={key:1};i();const ke={setup(e){const n=d(null),t=d(null),o=d(null),r=d(null),i=[119.198453,26.056812],c=d(!1),u=e=>{t.value=[e.position.lng,e.position.lat],console.log("当前位置:",t.value),f(i)},p=e=>{console.error("定位失败:",e.message),alert("无法获取当前位置，使用IP定位。"),AMap.plugin("AMap.CitySearch",(()=>{(new AMap.CitySearch).getLocalCity(((e,a)=>{"complete"===e&&"OK"===a.info&&a.bounds?(t.value=a.bounds.getCenter(),console.log("IP定位当前位置:",t.value),f(i)):alert("IP定位失败，请尝试手动选择位置。")}))}))},v=()=>{AMap.plugin("AMap.Geolocation",(function(){const e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,showButton:!0,buttonPosition:"RB",buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0});n.value.addControl(e),e.getCurrentPosition(((e,a)=>{"complete"===e?u(a):p(a)}))}))},f=e=>{AMap.plugin("AMap.Driving",(()=>{new AMap.Driving({map:n.value,panel:"panel"}).search(t.value,e,((e,a)=>{if("complete"===e&&a.routes&&a.routes.length){const e=a.routes[0];o.value=e.distance,r.value=Math.ceil(e.time/60)}else alert("驾车路线规划失败，请检查目的地是否正确。")}))}))},m=()=>{c.value=!0,alert("请点击地图以选择您的位置。")},h=e=>{c.value&&(t.value=[e.lnglat.getLng(),e.lnglat.getLat()],console.log("用户手动选择的位置:",t.value),y(t.value),f(i),c.value=!1)},y=e=>{new AMap.Marker({map:n.value,position:e})};return _((()=>{k((()=>{n.value=new AMap.Map("map",{zoom:12,resizeEnable:!0}),AMap.plugin("AMap.Geolocation",(function(){const e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,showButton:!0,buttonPosition:"RB",buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0});n.value.addControl(e),e.getCurrentPosition(((e,a)=>{"complete"===e?u(a):p(a)}))})),n.value.on("click",h)}))})),(e,n)=>(s(),a("div",ve,[fe,l("div",me,[ge,l("div",be,[null!==o.value?(s(),a("p",he,"距离："+b((o.value/1e3).toFixed(2))+" 公里",1)):g("",!0),null!==r.value?(s(),a("p",_e,"预计行驶时间："+b(r.value)+" 分钟",1)):g("",!0)]),l("button",{id:"refresh",onClick:v},"刷新定位"),l("button",{id:"manualMark",onClick:m},"手动选择位置")])]))},__scopeId:"data-v-327310bf"};r("data-v-13c110f3");const ye={class:"container"},Pe=l("h1",null,"推荐的停车位",-1),xe={key:0,class:"loading"},we={key:1},Me={class:"cards-container"},Ie=["onClick"],Ae={key:2,class:"no-results"},Ce={key:0,class:"sidebar"},De={class:"sidebar-header"},Ne={class:"sidebar-content"},Ue=l("strong",null,"费用：",-1),Le=l("strong",null,"距离：",-1),Se=l("strong",null,"发现时间：",-1),Te=l("strong",null,"停车场规模：",-1),Fe=l("strong",null,"近电梯：",-1),Ve=l("strong",null,"有监控：",-1),je=l("strong",null,"经度：",-1),ze=l("strong",null,"纬度：",-1),Ge=l("strong",null,"评分：",-1);i();const Re={setup(e){const r=d([]),i=d(!0),c=d(null),u=new URLSearchParams(window.location.search).get("userId");u||alert("userId 参数缺失");const p=()=>{c.value=null};return _((async()=>{if(u){i.value=!0;try{const e=await h.get(`/recommendations/${u}`);r.value=e.data}catch(e){console.error("获取推荐停车位失败:",e)}finally{i.value=!1}}})),(e,d)=>(s(),a("div",ye,[Pe,i.value?(s(),a("div",xe," 加载中... ")):r.value.length?(s(),a("div",we,[l("div",Me,[(s(!0),a(y,null,P(r.value,(n=>(s(),a("div",{class:"card",key:n.id,onClick:e=>(e=>{c.value=e})(n),onMouseenter:d[0]||(d[0]=a=>e.hover=!0),onMouseleave:d[1]||(d[1]=a=>e.hover=!1)},[l("h2",null,b(n.parking_type),1),l("p",null,"距离："+b(n.driving_distance)+" 米",1),l("p",null,"费用："+b(n.fee)+" 元/小时",1)],40,Ie)))),128))])])):(s(),a("div",Ae," 没有找到匹配的推荐结果。 ")),n(x,{name:"slide"},{default:t((()=>[c.value?(s(),a("div",Ce,[l("div",De,[l("h2",null,b(c.value.parking_type)+" - 详情",1),l("span",{class:"close",onClick:p},"×")]),l("div",Ne,[l("p",null,[Ue,o(b(c.value.fee)+" 元/小时",1)]),l("p",null,[Le,o(b(c.value.driving_distance)+" 米",1)]),l("p",null,[Se,o(b(c.value.found_time),1)]),l("p",null,[Te,o(b(c.value.parking_space_size),1)]),l("p",null,[Fe,o(b(c.value.near_elevator?"是":"否"),1)]),l("p",null,[Ve,o(b(c.value.has_surveillance?"是":"否"),1)]),l("p",null,[je,o(b(c.value.longitude),1)]),l("p",null,[ze,o(b(c.value.latitude),1)]),l("p",null,[Ge,o(b(c.value.grade),1)])])])):g("",!0)])),_:1})]))},__scopeId:"data-v-13c110f3"},qe=[{path:"/",name:"Home",component:S},{path:"/user-preferences",name:"UserPreferences",component:V},{path:"/parking-recommendations",name:"ParkingRecommendations",component:Re},{path:"/driving-route-planner",name:"DrivingRoutePlanner",component:ke}],Be=w({history:M(),routes:qe}),Ee=I(L);Ee.use(Be),Ee.mount("#app");
