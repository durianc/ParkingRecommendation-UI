import{r as e,c as a,a as t,b as l,w as n,o as s,d as o,p as r,e as i,f as d,g as c,h as u,i as v,v as p,j as f,k as m,l as g,t as b,m as _,n as h,q as k,F as y,s as P,T as x,u as w,x as M,y as I}from"./vendor.c6335476.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?a.credentials="include":"anonymous"===e.crossorigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const A={id:"app"},C=o("首页"),D=o("用户偏好设置"),N=o("获取推荐结果"),U=o("驾车路径规划"),L={setup:o=>(o,r)=>{const i=e("router-link"),d=e("router-view");return s(),a("div",A,[t("nav",null,[l(i,{to:"/"},{default:n((()=>[C])),_:1}),l(i,{to:"/user-preferences"},{default:n((()=>[D])),_:1}),l(i,{to:"/parking-recommendations"},{default:n((()=>[N])),_:1}),l(i,{to:"/driving-route-planner"},{default:n((()=>[U])),_:1})]),l(d)])}};const S={name:"HomePage"};r("data-v-73fa6578");const T={class:"home-page"},F=[d('<header class="header" data-v-73fa6578><h1 data-v-73fa6578>基于神经协同过滤的停车位推荐方法</h1><p data-v-73fa6578>智能化、个性化的停车位推荐系统</p></header><section class="content-section" data-v-73fa6578><div class="content-card" data-v-73fa6578><h2 data-v-73fa6578>方法概述</h2><p data-v-73fa6578> 本方法通过结合神经网络和协同过滤技术，针对停车位推荐问题提出了一种智能化、个性化的解决方案。利用用户偏好信息、位置信息，采用改进后的神经图匹配协同过滤（GMCF）算法，并结合Neo4j图数据库、qdrant向量数据库以及高德API，实现精准的推荐结果和前端可视化展示。 </p></div><div class="content-card" data-v-73fa6578><h2 data-v-73fa6578>方法优势</h2><ul data-v-73fa6578><li data-v-73fa6578>个性化推荐：基于改进的神经图匹配协同过滤方法，分析用户偏好，生成高度个性化的推荐结果。</li><li data-v-73fa6578>实时动态更新：采用Neo4j图数据库和qdrant技术，优化数据存储与检索效率。</li><li data-v-73fa6578>前端可视化：利用高德API进行推荐车位的可视化展示和驾车路径规划，用户可以直观地查看推荐停车位的位置及前往路线。</li></ul></div><div class="content-card" data-v-73fa6578><h2 data-v-73fa6578>应用场景</h2><ul data-v-73fa6578><li data-v-73fa6578>大城市或拥挤区域的停车位推荐。</li><li data-v-73fa6578>结合导航系统的智能停车推荐。</li><li data-v-73fa6578>为停车场提供智能化管理决策支持。</li></ul></div></section><section class="members-section" data-v-73fa6578><h2 data-v-73fa6578>项目成员</h2><div class="members-list" data-v-73fa6578><div class="member-card leader-card" data-v-73fa6578><strong data-v-73fa6578>陈威宇</strong></div><div class="member-card" data-v-73fa6578>张铭心</div><div class="member-card" data-v-73fa6578>肖晗涵</div><div class="member-card" data-v-73fa6578>洪巧君</div><div class="member-card" data-v-73fa6578>梅明胜</div></div></section><section class="teacher-section" data-v-73fa6578><h2 data-v-73fa6578>指导老师</h2><div class="members-list" data-v-73fa6578><div class="member-card teacher-card" data-v-73fa6578><strong data-v-73fa6578>廖龙龙</strong></div></div></section>',4)];i(),S.render=function(e,t,l,n,o,r){return s(),a("div",T,F)},S.__scopeId="data-v-73fa6578";const V={setup(){const e=c(""),a=c(!1),t=c(""),l=c(""),n=c({preferred_parking_types:[],max_parking_fee:null,preferred_parking_difficulty:null,max_walking_distance:null,max_driving_distance:null}),s=u((()=>{const{preferred_parking_types:e,max_parking_fee:a,preferred_parking_difficulty:t,max_walking_distance:l,max_driving_distance:s}=n.value;return e.length>0&&null!==a&&null!==t&&null!==l&&null!==s}));return{userIdString:e,preferences:n,userExists:a,successMessage:t,errorMessage:l,isFormComplete:s,fetchUserPreferences:async()=>{const s=parseInt(e.value);if(isNaN(s))l.value="请输入有效的用户ID";else{l.value="",t.value="",a.value=!1;try{const e=await _.get(`/user/${s}`);n.value=e.data,a.value=!0}catch(o){l.value=o.response?o.response.data.detail:"无法获取用户信息"}}},submitPreferences:async()=>{l.value="",t.value="";const a=parseInt(e.value);try{const e=await _.put(`/user/${a}`,n.value);t.value=e.data.msg}catch(s){l.value=s.response?s.response.data.detail:"提交偏好信息失败"}},goToNextPage:()=>{if(s.value){const a=parseInt(e.value);window.location.href=`/parking-recommendations?userId=${a}`}}}}};r("data-v-18b4d3d4");const j={class:"container mt-5"},z={class:"row justify-content-center"},G={class:"col-md-8 col-lg-8 col-xl-6"},R={class:"card shadow-sm p-4"},q=t("h1",{class:"text-center mb-4"},"用户偏好信息",-1),B={class:"mb-4 d-flex align-items-center"},E=t("label",{for:"userId",class:"form-label me-2"},"ID:",-1),H={class:"input-group"},O={class:"row mb-3"},$={class:"col-md-6"},K=t("label",{for:"preferredParkingTypes",class:"form-label"},"停车场类型偏好:",-1),W=[t("option",{value:"商场"},"商场",-1),t("option",{value:"地面停车场"},"地面停车场",-1),t("option",{value:"地下停车场"},"地下停车场",-1),t("option",{value:"交通枢纽"},"交通枢纽",-1)],Y={class:"col-md-6"},J=t("label",{for:"maxParkingFee",class:"form-label"},"最大停车费用 (CNY/hour):",-1),Q=[d('<option disabled value="" data-v-18b4d3d4>请选择费用</option><option value="10" data-v-18b4d3d4>10</option><option value="20" data-v-18b4d3d4>20</option><option value="30" data-v-18b4d3d4>30</option><option value="40" data-v-18b4d3d4>40</option>',5)],X={class:"row mb-3"},Z={class:"col-md-6"},ee=t("label",{for:"preferredParkingDifficulty",class:"form-label"},"停车难度偏好:",-1),ae=[t("option",{value:"容易"},"容易",-1),t("option",{value:"中等"},"中等",-1),t("option",{value:"困难"},"困难",-1)],te={class:"col-md-6"},le=t("label",{for:"maxWalkingDistance",class:"form-label"},"最大步行距离 (米):",-1),ne=[d('<option disabled value="" data-v-18b4d3d4>请选择距离</option><option value="100" data-v-18b4d3d4>100</option><option value="200" data-v-18b4d3d4>200</option><option value="300" data-v-18b4d3d4>300</option><option value="400" data-v-18b4d3d4>400</option>',5)],se={class:"row mb-3"},oe={class:"col-md-12"},re=t("label",{for:"maxDrivingDistance",class:"form-label"},"最大驾车距离 (米):",-1),ie=[d('<option disabled value="" data-v-18b4d3d4>请选择距离</option><option value="500" data-v-18b4d3d4>500</option><option value="1000" data-v-18b4d3d4>1000</option><option value="1500" data-v-18b4d3d4>1500</option><option value="2000" data-v-18b4d3d4>2000</option>',5)],de=t("button",{type:"submit",class:"btn btn-success"},"提交偏好信息",-1),ce=["disabled"],ue={key:1,class:"alert alert-danger mt-3"},ve={key:2,class:"alert alert-success mt-3"};i(),V.render=function(e,l,n,o,r,i){return s(),a("div",j,[t("div",z,[t("div",G,[t("div",R,[q,t("div",B,[E,t("div",H,[v(t("input",{type:"text",id:"userId",class:"form-control","onUpdate:modelValue":l[0]||(l[0]=e=>o.userIdString=e),placeholder:"请输入用户ID"},null,512),[[p,o.userIdString]]),t("button",{onClick:l[1]||(l[1]=(...e)=>o.fetchUserPreferences&&o.fetchUserPreferences(...e)),class:"btn btn-primary ms-2"},"获取用户信息")])]),o.userExists?(s(),a("form",{key:0,onSubmit:l[8]||(l[8]=f(((...e)=>o.submitPreferences&&o.submitPreferences(...e)),["prevent"]))},[t("div",O,[t("div",$,[K,v(t("select",{id:"preferredParkingTypes",class:"form-select","onUpdate:modelValue":l[2]||(l[2]=e=>o.preferences.preferred_parking_types=e)},W,512),[[m,o.preferences.preferred_parking_types]])]),t("div",Y,[J,v(t("select",{id:"maxParkingFee",class:"form-select","onUpdate:modelValue":l[3]||(l[3]=e=>o.preferences.max_parking_fee=e)},Q,512),[[m,o.preferences.max_parking_fee]])])]),t("div",X,[t("div",Z,[ee,v(t("select",{id:"preferredParkingDifficulty",class:"form-select","onUpdate:modelValue":l[4]||(l[4]=e=>o.preferences.preferred_parking_difficulty=e)},ae,512),[[m,o.preferences.preferred_parking_difficulty]])]),t("div",te,[le,v(t("select",{id:"maxWalkingDistance",class:"form-select","onUpdate:modelValue":l[5]||(l[5]=e=>o.preferences.max_walking_distance=e)},ne,512),[[m,o.preferences.max_walking_distance]])])]),t("div",se,[t("div",oe,[re,v(t("select",{id:"maxDrivingDistance",class:"form-select","onUpdate:modelValue":l[6]||(l[6]=e=>o.preferences.max_driving_distance=e)},ie,512),[[m,o.preferences.max_driving_distance]])])]),de,t("button",{onClick:l[7]||(l[7]=(...e)=>o.goToNextPage&&o.goToNextPage(...e)),disabled:!o.isFormComplete,class:"btn btn-primary ms-2"},"下一步",8,ce)],32)):g("",!0),o.errorMessage?(s(),a("div",ue,b(o.errorMessage),1)):g("",!0),o.successMessage?(s(),a("div",ve,b(o.successMessage),1)):g("",!0)])])])])},V.__scopeId="data-v-18b4d3d4";r("data-v-327310bf");const pe={id:"container"},fe=t("div",{id:"map"},null,-1),me={id:"panel"},ge=t("h3",null,"驾车路线",-1),be={id:"routeInfo"},_e={key:0},he={key:1};i();const ke={setup(e){const l=c(null),n=c(null),o=c(null),r=c(null),i=[119.198453,26.056812],d=c(!1),u=e=>{n.value=[e.position.lng,e.position.lat],console.log("当前位置:",n.value),f(i)},v=e=>{console.error("定位失败:",e.message),alert("无法获取当前位置，使用IP定位。"),AMap.plugin("AMap.CitySearch",(()=>{(new AMap.CitySearch).getLocalCity(((e,a)=>{"complete"===e&&"OK"===a.info&&a.bounds?(n.value=a.bounds.getCenter(),console.log("IP定位当前位置:",n.value),f(i)):alert("IP定位失败，请尝试手动选择位置。")}))}))},p=()=>{AMap.plugin("AMap.Geolocation",(function(){const e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,showButton:!0,buttonPosition:"RB",buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0});l.value.addControl(e),e.getCurrentPosition(((e,a)=>{"complete"===e?u(a):v(a)}))}))},f=e=>{AMap.plugin("AMap.Driving",(()=>{new AMap.Driving({map:l.value,panel:"panel"}).search(n.value,e,((e,a)=>{if("complete"===e&&a.routes&&a.routes.length){const e=a.routes[0];o.value=e.distance,r.value=Math.ceil(e.time/60)}else alert("驾车路线规划失败，请检查目的地是否正确。")}))}))},m=()=>{d.value=!0,alert("请点击地图以选择您的位置。")},_=e=>{d.value&&(n.value=[e.lnglat.getLng(),e.lnglat.getLat()],console.log("用户手动选择的位置:",n.value),y(n.value),f(i),d.value=!1)},y=e=>{new AMap.Marker({map:l.value,position:e})};return h((()=>{k((()=>{l.value=new AMap.Map("map",{zoom:12,resizeEnable:!0}),AMap.plugin("AMap.Geolocation",(function(){const e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,showButton:!0,buttonPosition:"RB",buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0});l.value.addControl(e),e.getCurrentPosition(((e,a)=>{"complete"===e?u(a):v(a)}))})),l.value.on("click",_)}))})),(e,l)=>(s(),a("div",pe,[fe,t("div",me,[ge,t("div",be,[null!==o.value?(s(),a("p",_e,"距离："+b((o.value/1e3).toFixed(2))+" 公里",1)):g("",!0),null!==r.value?(s(),a("p",he,"预计行驶时间："+b(r.value)+" 分钟",1)):g("",!0)]),t("button",{id:"refresh",onClick:p},"刷新定位"),t("button",{id:"manualMark",onClick:m},"手动选择位置")])]))},__scopeId:"data-v-327310bf"};r("data-v-f32d0984");const ye={class:"container"},Pe=t("h1",null,"推荐的停车位",-1),xe={key:0,class:"loading"},we={key:1},Me={class:"cards-container"},Ie=["onClick"],Ae={key:2,class:"no-results"},Ce={key:0,class:"sidebar"},De={class:"sidebar-header"},Ne={class:"sidebar-content"},Ue=t("strong",null,"费用：",-1),Le=t("strong",null,"距离：",-1),Se=t("strong",null,"发现时间：",-1),Te=t("strong",null,"停车场规模：",-1),Fe=t("strong",null,"近电梯：",-1),Ve=t("strong",null,"有监控：",-1),je=t("strong",null,"经度：",-1),ze=t("strong",null,"纬度：",-1),Ge=t("strong",null,"评分：",-1);i();const Re={setup(e){const r=c([]),i=c(!0),d=c(null),u=new URLSearchParams(window.location.search).get("userId");u||alert("userId 参数缺失");const v=()=>{d.value=null};return h((async()=>{if(u){i.value=!0;try{const e=await _.get(`/recommendations/${u}`);r.value=e.data}catch(e){console.error("获取推荐停车位失败:",e)}finally{i.value=!1}}})),(e,c)=>(s(),a("div",ye,[Pe,i.value?(s(),a("div",xe," 加载中... ")):r.value.length?(s(),a("div",we,[t("div",Me,[(s(!0),a(y,null,P(r.value,(l=>(s(),a("div",{class:"card",key:l.id,onClick:e=>(e=>{d.value=e})(l),onMouseenter:c[0]||(c[0]=a=>e.hover=!0),onMouseleave:c[1]||(c[1]=a=>e.hover=!1)},[t("h2",null,b(l.parking_type),1),t("p",null,"距离："+b(l.driving_distance)+" 米",1),t("p",null,"费用："+b(l.fee)+" 元/小时",1)],40,Ie)))),128))])])):(s(),a("div",Ae," 没有找到匹配的推荐结果。 ")),l(x,{name:"slide"},{default:n((()=>[d.value?(s(),a("div",Ce,[t("div",De,[t("h2",null,b(d.value.parking_type),1),t("span",{class:"close",onClick:v},"×")]),t("div",Ne,[t("p",null,[Ue,o(b(d.value.fee)+" 元/小时",1)]),t("p",null,[Le,o(b(d.value.driving_distance)+" 米",1)]),t("p",null,[Se,o(b(d.value.found_time),1)]),t("p",null,[Te,o(b(d.value.parking_space_size),1)]),t("p",null,[Fe,o(b(d.value.near_elevator?"是":"否"),1)]),t("p",null,[Ve,o(b(d.value.has_surveillance?"是":"否"),1)]),t("p",null,[je,o(b(d.value.longitude),1)]),t("p",null,[ze,o(b(d.value.latitude),1)]),t("p",null,[Ge,o(b(d.value.grade),1)])])])):g("",!0)])),_:1})]))},__scopeId:"data-v-f32d0984"},qe=[{path:"/",name:"Home",component:S},{path:"/user-preferences",name:"UserPreferences",component:V},{path:"/parking-recommendations",name:"ParkingRecommendations",component:Re},{path:"/driving-route-planner",name:"DrivingRoutePlanner",component:ke}],Be=w({history:M(),routes:qe}),Ee=I(L);Ee.use(Be),Ee.mount("#app");
